/* client/src/styles/BrowseBooks.css */

/* Color variables from your theme */
:root {
  --primary-blue: #0f2e68; /* A deep blue matching your screenshot */
  --accent-yellow: #f5c542; /* A warm yellow for buttons */
  --light-text: #ffffff;
  --dark-text: #333; /* Dark text for general content */
  --background-gray: #f4f7fa; /* Light background for dashboard */
  --border-color: #e1e5e8; /* Light border color */
  --red-delete: #dc3545; /* Red for delete/missing actions */
  --green-confirm: #28a745; /* Green for available/confirm */
}


/* --- General Category Page Layout --- */
.category-page, .librarian-category-page {
  position: relative;
  overflow: hidden; /* Ensures image doesn't overflow */
  padding-inline: 6em;
  
}

.category-page {
  padding-top: 6em;
  min-height: 100vh; /* Adjust based on your header height */
  background: linear-gradient(to left, #0f2e68, #3171d1);
}

.librarian-category-page {
  padding-top: 2em;
  min-height: calc(100vh - 2em); /* Adjust based on your header height */
  background: linear-gradient(to top, #a0b2d3, #f4f7fa);
}

.category-bg-image {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  z-index: -1; /* Puts image behind content */
  filter: brightness(0.6); /* Make text more readable */
}

.category-page-container {
  max-width: 90%;
  margin: 4em auto;
}

.category-header, .librarian-category-header {
  text-align: center;
  margin-bottom: 30px;
  color: var(--light-text); /* Changed to light text for contrast against dark image */
}

.librarian-category-header {
  text-align: left;
}

.category-title, .librarian-category-title {
  font-size: 2.5em;
  margin-bottom: 1.4em;
  color: var(--accent-yellow); /* Using accent color for title */
  text-align: center;
}

.librarian-category-title {
  text-align: left;
  color: var(--primary-blue)
}


.category-list-container {
  background-color: rgba(255, 255, 255, 0.4); /* Semi-transparent background for content */
  padding: 2em;
  border-radius: 8px; /* Added border-radius */
}

.category-list {
  list-style: none;
  padding: 0;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); /* Responsive grid for categories */
  gap: 1.5rem; /* Gap between category items */
}

.category-item {
  background-color: rgba(255, 255, 255, 0.5); /* Light gray background */
  color: var(--dark-text); /* Dark text */
  padding: 1em 1.4em;
  margin-bottom: 0.5em;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1.1em;
  font-weight: bold;
  transition: background-color 0.3s ease, transform 0.2s ease;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  text-align: center;
  display: flex;
  justify-content: center;
  align-items: center;
}

.category-item:hover {
  background-color: #d4e3f0; /* Lighter blue on hover */
  transform: translateY(-3px);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
}

.category-disclaimer {
  margin-top: 1em;
  font-size: 1em;
  color: var(--light-text); /* Light text for readability */
  text-align: center;
}

/* --- Book List Specific Styles --- */
.category-page .book-list-view {
  padding-top: 10em; /* Consistent padding when showing book list */
}

.add-book-btn {
  background-color: var(--accent-yellow);
  color: var(--primary-blue);
  border: none;
  padding: 0.75rem 1.25rem;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1rem;
  font-weight: bold;
  margin-bottom: 0;
  transition: background-color 0.2s ease;

}
.add-book-btn:hover {
  background-color: #e4b43a;
}

.search-inputs-container {
  display: flex;
  gap: 15px;
  margin-bottom: 25px;
  flex-wrap: wrap; /* Allows inputs to wrap on smaller screens */
  justify-content: center; /* Center search inputs */
}

.search-input, .category-search {
  padding: 10px 15px;
  border: 1px solid var(--border-color);
  border-radius: 5px;

  flex-grow: 1; /* Allow inputs to grow if space available */
  max-width: 100%;
  font-size: 1em;
  color: var(--dark-text);
  background-color: var(--light-text);
}
.search-input:focus, .category-search:focus {
  outline: 2px solid var(--accent-yellow);
  border-color: var(--primary-blue);
  background-color: var(--light-text); /* White background on focus */
}

.category-search {
  max-width: 100%;
  width: 30%;
}

.back-to-categories {
  background-color: #6c757d; /* Gray */
  color: var(--light-text);
  border: none;
  padding: 0.75rem 1.25rem;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1rem;
  font-weight: bold;
  transition: background-color 0.2s ease;
  white-space: nowrap; /* Prevent text wrapping inside button */
}
.back-to-categories:hover {
  background-color: #5a6268;
}


.book-container {
  background-color: #fff;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  /* Define grid on the container and use the CSS variable */
  display: grid;
  grid-template-columns: var(--book-grid-columns, 2fr 1.5fr 1fr 1.5fr); /* Fallback to student view */
  margin-bottom: 7em;
}

/* Make children of book-header and book-row participate directly in .book-container's grid */
.book-header,
.book-row {
  display: contents;
}


/* Styling for individual cells within the grid */
.book-header > div,
.book-row > div {
  padding: 1rem 1.5rem; /* Apply padding to individual cells */
  border-bottom: 1px solid var(--border-color); /* Apply border to individual cells */
  text-align: left; /* Default text alignment */
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* Remove bottom border from last cells of the last row */
.book-row:last-of-type > div {
  border-bottom: none;
}

/* Hover effect on entire row for consistency */
.book-row:hover > div {
  background-color: #f0f4f8; /* Light hover effect for cells */
}


.book-header > div {
  font-weight: bold;
  background-color: var(--background-gray); /* Lighter background for header */
  color: var(--primary-blue);
  text-transform: uppercase;
  font-size: 0.9rem;
}

.book-status { 
  font-weight: 600;
  text-align: center; /* Center status text */
}
.book-actions { 
  display: flex;
  /* Adjust layout to accommodate both toggle button and kebab menu */
  gap: 0.5rem; /* Space between action elements */
  flex-wrap: wrap; /* Allow wrapping */
  justify-content: flex-end; /* Align action buttons to the right */
  position: relative; /* Crucial for positioning the dropdown */
}


/* Status colors */
.book-status.available { color: var(--green-confirm); }
.book-status.borrowed { color: var(--primary-blue); } /* Changed from yellow to primary blue */
.book-status.missing { color: var(--red-delete); }

.librarian-form input{
  padding: 0.8em 0.5em;
  
}

.librarian-form {
  display: flex;
  flex-direction: column;
  gap: 1em;
  width: 100%;
}

/* General button styles */
.btn-action {
  padding: 8px 12px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.9em;
  transition: background-color 0.2s ease;
  min-width: 100px; /* Ensure buttons have a consistent width */
  text-align: center;
  white-space: nowrap; /* Prevent button text wrapping */
}

.btn-action:hover {
  opacity: 0.9;
}

/* Toggle buttons for librarian (standalone) */
.btn-action.toggle-btn.mark-borrowed { /* When status is available, button says 'Mark as Borrowed' */
  background-color: #007bff; /* Blue */
  color: var(--light-text);
}

.btn-action.toggle-btn.mark-borrowed:hover {
  background-color: #0056b3;
}

.btn-action.toggle-btn.mark-available { /* When status is borrowed/missing, button says 'Mark as Available' */
  background-color: var(--green-confirm); /* Green */
  color: var(--light-text);
}

.btn-action.toggle-btn.mark-available:hover {
  background-color: #218838;
}

/* Borrow button for students */
.btn-action.borrow-btn {
  background-color: var(--primary-blue); /* Blue for borrow */
  color: var(--light-text);
}

.btn-action.borrow-btn:hover:not(:disabled) {
  background-color: #0f2e68c0;
}

.btn-action.borrow-btn:disabled {
  background-color: #cccccc;
  cursor: not-allowed;
  color: #666666;
}



/* Kebab Menu specific styles */
.kebab-menu-container {
  position: relative;
  /* display: inline-block; or display: flex; align-items: center; */
  /* For placement next to a button, 'flex' can work well within book-actions flex container */
  display: flex; /* Treat as a flex item */
  align-items: center; /* Vertically align with the button */
}

.kebab-button {
  background: none;
  border: none;
  font-size: 1.5rem; /* Make the dots visible */
  font-weight: bold;
  color: var(--primary-blue);
  cursor: pointer;
  padding: 0 0.5rem;
  line-height: 1; /* Adjust vertical alignment */
  transition: color 0.2s ease;
}

.kebab-button:hover {
  color: var(--accent-yellow);
}

.kebab-dropdown-menu {
  position: absolute;
  top: 100%; /* Position below the button */
  right: 0; /* Align to the right of the button */
  background-color: var(--light-text);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  list-style: none;
  padding: 0.5rem 0;
  margin: 0.5rem 0 0 0; /* Space below button */
  min-width: 180px;
  z-index: 10; /* Ensure dropdown appears above other content */
}

.kebab-dropdown-menu li {
  padding: 0.8rem 1.2rem;
  cursor: pointer;
  color: var(--dark-text);
  font-size: 0.95rem;
  white-space: nowrap;
  transition: background-color 0.2s ease, color 0.2s ease;
}

.kebab-dropdown-menu li:hover {
  background-color: var(--background-gray);
  color: var(--primary-blue);
}

/* No books message */
.no-books-found {
  text-align: center;
  padding: 2rem;
  color: #666;
  font-style: italic;
  grid-column: 1 / -1; /* Make it span all columns */
}

/* --- Modal for Add/Edit Book Form --- */
.add-edit-form-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6); /* Slightly darker overlay */
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.add-edit-form-modal-content {
  background: #fff;
  padding: 2rem;
  border-radius: 8px;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3); /* Stronger shadow for modal */
  width: 90%;
  max-width: 500px;
  animation: fadeIn 0.3s ease-out; /* Simple fade-in animation */
  max-height: 80vh;
  overflow-y: auto;
}

.add-edit-form-modal-content h3 {
  color: var(--primary-blue);
  margin-bottom: 1.5rem;
  text-align: center;
  font-size: 1.8rem;
}

.add-edit-book-form {
  width: 100%;
}

.add-edit-book-form label {
  display: flex;
  flex-direction: column;
  margin-bottom: 1rem;
  font-weight: 500;
  color: var(--dark-text);
}

.add-edit-book-form input,
.add-edit-book-form select {
  width: 100%;
  padding: 0.75rem;
  margin-top: 0.3rem;
  border: 1px solid var(--border-color);
  border-radius: 5px;
  font-size: 1rem;
  box-sizing: border-box;
  background-color: var(--background-gray);
  color: var(--dark-text);
}

.add-edit-book-form input:focus,
.add-edit-book-form select:focus {
  outline: 2px solid var(--accent-yellow);
  border-color: var(--primary-blue);
  background-color: var(--light-text);
}

.add-edit-book-form .form-actions {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 1rem;
  margin-top: 2rem;
}

.add-edit-book-form .btn-primary {
  background-color: var(--primary-blue);
  color: var(--light-text);
  padding: 0.8rem 1.5rem;
  border-radius: 8px;
  font-weight: bold;
  border: none;
  font-size: 1rem;
  margin-bottom: 0;
}
.add-edit-book-form .btn-primary:hover {
  background-color: #1a3b7a;
}

.add-edit-book-form .btn-secondary {
  background-color: #ccc;
  color: var(--dark-text);
  padding: 0.8rem 1.5rem;
  border-radius: 8px;
  font-weight: bold;
}
.add-edit-book-form .btn-secondary:hover {
  background-color: #b0b0b0;
}

/* Fade-in animation for modal */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* --- Media Queries for responsiveness --- */
@media (max-width: 992px) { /* Adjust breakpoint if needed */
  /* Default student view: Title, Author, Status, Actions */
  .book-container {
    grid-template-columns: var(--book-grid-columns, 2fr 1.5fr 1fr 1.5fr);
  }

  /* Librarian view: Title, Author, ISBN, Status, Actions */
  .book-container[style*="--book-grid-columns"]:has(.book-isbn) {
    /* Adjusted to account for the separate toggle button */
    grid-template-columns: var(--book-grid-columns, 2fr 1.2fr 0.8fr 1fr 2fr); 
  }

  .book-actions {
    flex-direction: column; /* Stack actions vertically */
    align-items: flex-end; /* Align stacked buttons to the right */
    gap: 0.5rem; /* Space between kebab menu and borrow button if it existed */
  }
  .kebab-dropdown-menu {
    left: auto; /* Reset left */
    right: 0; /* Keep aligned to the right */
  }
}

/* --- Responsive Design for BrowseBooks Page --- */

/* --- Tablet screens --- */
@media (max-width: 1024px) {
  .category-page {
    padding-inline: 3em;
  }

  .category-title {
    font-size: 2em;
  }

  .search-inputs-container {
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
  }

  .book-container {
    overflow-x: auto;
    display: block; /* Allow horizontal scrolling for many columns */
  }

  .book-header,
  .book-row {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
  }

  .book-header > div,
  .book-row > div {
    padding: 0.75em;
  }
}

/* --- Mobile screens --- */
@media (max-width: 768px) {
  .category-page {
    padding-inline: 1.5em;
    padding-top: 5em;
  }

  .category-title {
    font-size: 1.7em;
  }

  .category-search {
    width: 100%;
    margin: 0 0 10px 0;
  }

  .category-list {
    grid-template-columns: 1fr 1fr;
    gap: 1em;
  }

  .category-item {
    font-size: 1em;
    padding: 0.8em;
  }

  .search-inputs-container {
    flex-direction: column;
    align-items: stretch;
    gap: 10px;
  }

  .search-input,
  .add-book-btn,
  .back-to-categories {
    width: 100%;
    max-width: none;
    text-align: center;
  }

  /* Make book list more card-like for phones */
  .book-container {
    display: flex;
    flex-direction: column;
    gap: 1em;
    overflow: visible;
  }

  .book-header {
    display: none; /* Hide table header on mobile */
  }

  .book-row {
    display: flex;
    flex-direction: column;
    background-color: #fff;
    border: 1px solid var(--border-color);
    border-radius: 10px;
    padding: 1em;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  }

  .book-row > div {
    padding: 0.4em 0;
    border: none;
  }

  .book-title {
    font-weight: bold;
    font-size: 1.1em;
    margin-bottom: 0.2em;
  }

  .book-author,
  .book-isbn,
  .book-status {
    font-size: 0.95em;
  }

  .book-actions {
    flex-direction: column;
    align-items: stretch;
    gap: 0.5em;
    margin-top: 0.6em;
  }

  .btn-action {
    width: 100%;
    font-size: 0.95em;
    padding: 0.7em;
  }

  .kebab-button {
    align-self: flex-end;
  }

  .add-edit-form-modal-content {
    width: 90%;
    padding: 1.5em;
  }
  .category-search, .search-input {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
 
  }
}

/* --- Very small screens (under 480px) --- */
@media (max-width: 480px) {
  .category-title {
    font-size: 1.5em;
  }

  .category-item {
    font-size: 0.9em;
    padding: 0.6em;
  }

  .book-row {
    padding: 0.8em;
  }

  .btn-action {
    font-size: 0.9em;
    padding: 0.6em;
  }

  .search-input {
    font-size: 0.9em;
  }
  
}
